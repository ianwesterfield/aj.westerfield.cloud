# Mixed Dataset v1 Training Config for H200 (141GB VRAM)
# AJ-DSR1Q32B-v2.0.0-lora
#
# Dataset: Mixed conversational + plant/farming + apothecary + strategic
# Focus: Conversational adaptability, domain knowledge, reasoning

# Model
model_name: "deepseek-ai/DeepSeek-R1-Distill-Qwen-32B"
output_dir: "./mixed-v1-output"

# Dataset (generated by prepare_mixed_v1.py)
train_file: "datasets/processed/mixed_v1.train.jsonl"
eval_file: "datasets/processed/mixed_v1.eval.jsonl"

# LoRA Configuration
# Same as v1.0 for A/B comparison
lora_r: 64
lora_alpha: 128
lora_dropout: 0.05
target_modules:
  - "q_proj"
  - "k_proj"
  - "v_proj"
  - "o_proj"
  - "gate_proj"
  - "up_proj"
  - "down_proj"

# Batch Size
# Effective batch size = batch_size * gradient_accumulation_steps = 16
batch_size: 2
gradient_accumulation_steps: 8

# Training Duration
# Mixed dataset is ~300K examples vs Toucan's 118K
# Running same number of steps for comparison
num_epochs: 1
max_steps: 5000

# Optimizer
learning_rate: 2e-5
weight_decay: 0.01
warmup_steps: 100

# Sequence Length
max_seq_length: 2048

# Logging & Checkpoints
logging_steps: 10
save_steps: 500
eval_steps: 500

# Versioning
version: "v2.0.0-lora"
dataset_version: "mixed_v1"
base_model_code: "DSR1Q32B"

# In addition to the inherent DeepSeek-R1 capabilities, this configuration enhances:
# - 50% conversational patterns (WildChat 82K + UltraChat 45K from HuggingFace)
# - 40% domain knowledge (loaded from training/data/*.jsonl):
#     * Development: Angular, TypeScript, Python, Node.js, API, Web fundamentals
#     * Infrastructure: Docker, Linux, Windows, Cloud/DevOps, Networking, Security
#     * Data: SQL, Qdrant vectors, Storage patterns
#     * Quality: Code review, Refactoring, Testing, Architecture
#     * Agentic: xLAM function calling, Agent instruct, Tool selection, Guardrails
#     * Planning: Project/task planning, Multi-step workflows
#     * IDE: VSCode workflows, Git version control
#     * Project-specific: Mesosync workspace, AI/ML patterns
# - 10% strategic reasoning (Skein text adventures 14.6K)
