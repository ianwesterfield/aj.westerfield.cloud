{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DPO Preference Pair",
  "description": "A preference pair for Direct Preference Optimization training",
  "type": "object",
  "required": [
    "prompt",
    "chosen",
    "rejected",
    "metadata"
  ],
  "properties": {
    "prompt": {
      "type": "string",
      "description": "The task or instruction"
    },
    "chosen": {
      "type": "string",
      "description": "The preferred response (higher quality)"
    },
    "rejected": {
      "type": "string",
      "description": "The rejected response (lower quality)"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "preference_reason": {
          "type": "string",
          "enum": [
            "correctness",
            "efficiency",
            "readability",
            "safety",
            "completeness",
            "idiomatic",
            "error_handling"
          ]
        },
        "margin": {
          "type": "number",
          "description": "How much better chosen is (0.0-1.0)",
          "minimum": 0,
          "maximum": 1
        },
        "category": {
          "type": "string"
        }
      }
    }
  }
}