{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agentic Trajectory",
  "description": "A complete tool-use trajectory showing thought → action → observation loops",
  "type": "object",
  "required": [
    "task",
    "trajectory",
    "metadata"
  ],
  "properties": {
    "task": {
      "type": "string",
      "description": "The task/goal to accomplish",
      "examples": [
        "Fix the failing unit test in src/services/userService.test.ts",
        "Add rate limiting to the /api/users endpoint",
        "Debug why the Docker container exits immediately"
      ]
    },
    "context": {
      "type": "object",
      "description": "Initial context provided to the agent",
      "properties": {
        "files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string"
              },
              "content": {
                "type": "string"
              }
            }
          }
        },
        "error_message": {
          "type": "string"
        },
        "environment": {
          "type": "string"
        }
      }
    },
    "trajectory": {
      "type": "array",
      "description": "Sequence of thought-action-observation steps",
      "items": {
        "type": "object",
        "required": [
          "step_type"
        ],
        "properties": {
          "step_type": {
            "type": "string",
            "enum": [
              "thought",
              "action",
              "observation",
              "final_answer"
            ]
          },
          "content": {
            "type": "string",
            "description": "For thought/observation/final_answer steps"
          },
          "tool": {
            "type": "string",
            "description": "Tool name for action steps",
            "examples": [
              "read_file",
              "replace_string_in_file",
              "run_in_terminal",
              "grep_search",
              "semantic_search"
            ]
          },
          "tool_input": {
            "type": "object",
            "description": "Tool parameters for action steps"
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": [
        "category",
        "difficulty",
        "tools_used"
      ],
      "properties": {
        "category": {
          "type": "string",
          "enum": [
            "coding",
            "debugging",
            "refactoring",
            "devops",
            "documentation",
            "testing",
            "architecture"
          ]
        },
        "difficulty": {
          "type": "string",
          "enum": [
            "easy",
            "medium",
            "hard",
            "expert"
          ]
        },
        "tools_used": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "num_steps": {
          "type": "integer"
        },
        "success": {
          "type": "boolean"
        },
        "verification_method": {
          "type": "string",
          "enum": [
            "tests_pass",
            "manual_review",
            "linter_clean",
            "builds_successfully"
          ]
        }
      }
    }
  }
}